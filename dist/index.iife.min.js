(function(){'use strict';var e=Number.parseInt,t=Math.min,n=Math.max,a=Number.isNaN,o=Math.PI;const s=220,l=110,r=0.0556434,d=0.2040259,u=1.0572252,g=-0.969266,m=1.8760108,h=0.041556,c=0.5,f=60,p=120,y=180,x=240,_=255,v=134,w=360,$=100,C=3.2404542,D=1.5371385,I=0.4985314,L=12.92,E=1.055,T=0.055,i=0.04045,S=0.0031308,A=2.4,F=1/2.4,N=4/29,P=6/29,k=3*P**2,V=P**3,U=1/3,K=500,M=0.95047,W=3,j=16,O=116,q=200,Q=1.08883,b=(e,s,i,l,f,p)=>{const b=l*v,c=i*w*(o/180),U=Math.cos(c)*b,A=Math.sin(c)*b,B=(f*$+j)/O,y=a(U)?B:B+U/K,x=a(A)?B:B-A/q,z=B>P?B**W:k*(B-N),Y=M*(y>P?y**W:k*(y-N)),X=Q*(x>P?x**W:k*(x-N)),Z=C*Y-D*z-I*X,R=g*Y+m*z+h*X,G=r*Y-d*z+u*X,V=_*(Z<=S?L*Z:E*Z**F-T),H=_*(R<=S?L*R:E*R**F-T),J=_*(G<=S?L*G:E*G**F-T);p&&(255<n(V,H,J)||0>t(V,H,J))?e[s]=e[s+1]=e[s+2]=0:(e[s]=V,e[s+1]=H,e[s+2]=J)};window.hcl=(e,t,n)=>{const a=new Uint8Array(3);return b(a,0,e,t,n,!1),a};const z=(e,t,n)=>{const[r,o,s]=H(e,t,n),d=r<=i?r/L:((r+T)/E)**A,u=o<=i?o/L:((o+T)/E)**A,a=s<=i?s/L:((s+T)/E)**A,l=(0.4124564*d+0.3575761*u+0.1804375*a)/M,g=0.2126729*d+0.7151522*u+0.072175*a,m=(0.0193339*d+0.119192*u+0.9503041*a)/Q,c=l>V?l**U:l/k+N,h=g>V?g**U:g/k+N,f=m>V?m**U:m/k+N;return[O*h-j,K*(c-h),q*(h-f)]},H=(...e)=>e.map((e)=>e/_);var R=[['hcl',b,(e,t,n)=>{const[a,i,r]=z(e,t,n),s=Math.atan2(r,i)*(180/o),l=0>s?s+w:s,d=Math.sqrt(i*i+r*r);return[l/w,d/v,a/$]},'hue','chroma','luminance',[0,360],[0,134],[0,134]],['hsl',(e,t,n,a,i)=>{const r=n*w,o=i+(i<c?i:1-i)*a,s=2*i-o,l=r>=x?r-x:r+p,d=r<p?r+x:r-p;e[t]=_*(l<f?s+(o-s)*l/f:l<y?o:l<x?s+(o-s)*(x-l)/f:s),e[t+1]=_*(r<f?s+(o-s)*r/f:r<y?o:r<x?s+(o-s)*(x-r)/f:s),e[t+2]=_*(d<f?s+(o-s)*d/f:d<y?o:d<x?s+(o-s)*(x-d)/f:s)},(e,a,i)=>{const r=H(e,a,i),o=t(...r),s=n(...r),l=s-o,d=(s+o)/2||0;if(0==l)return[0,0,d];const u=l/(d<c?s+o:2-s-o),[g,m,f]=r.map((e)=>((s-e)/6+l/2)/l),[p,b]=r,y=p===s?f-m:b===s?U+g-f:U+U+m-g;return[0>y?y+1:1<y?y-1:y,u,d]},'hue','saturation','luminosity',[0,360],[0,100],[0,100]],['hsv',(e,t,n,a,i)=>{if(0===a)return void(e[t]=e[t+1]=e[t+2]=i*_);const r=i*_,o=1===n?0:6*n,s=Math.floor(o),l=o-s,d=r*(1-a),u=r*(1-a*l),g=r*(1-a*(1-l));switch(s){case 0:return e[t]=r,e[t+1]=g,void(e[t+2]=d);case 1:return e[t]=u,e[t+1]=r,void(e[t+2]=d);case 2:return e[t]=d,e[t+1]=r,void(e[t+2]=g);case 3:return e[t]=d,e[t+1]=u,void(e[t+2]=r);case 4:return e[t]=g,e[t+1]=d,void(e[t+2]=r);default:e[t]=r,e[t+1]=d,e[t+2]=u;}},(e,a,i)=>{const r=H(e,a,i),o=t(...r),s=n(...r),l=s-o;if(0==l)return[0,0,s];const[d,u,g]=r.map((e)=>((s-e)/6+l/2)/l),[m,c]=r,f=m===s?g-u:c===s?U+d-g:U+U+u-d;return[0>f?f+1:1<f?f-1:f,l/s,s]},'hue','saturation','value',[0,360],[0,100],[0,100]],['lab',(e,o,i,c,f,p)=>{const b=c*s-l,v=f*s-l,A=(i*$+j)/O,y=a(b)?A:A+b/K,x=a(v)?A:A-v/q,w=A>P?A**W:k*(A-N),z=M*(y>P?y**W:k*(y-N)),B=Q*(x>P?x**W:k*(x-N)),Y=C*z-D*w-I*B,R=g*z+m*w+h*B,G=r*z-d*w+u*B,V=_*(Y<=S?L*Y:E*Y**F-T),X=_*(R<=S?L*R:E*R**F-T),Z=_*(G<=S?L*G:E*G**F-T);p&&(255<n(V,X,Z)||0>t(V,X,Z))?e[o]=e[o+1]=e[o+2]=0:(e[o]=V,e[o+1]=X,e[o+2]=Z)},(e,t,n)=>{const[a,i,r]=z(e,t,n);return[a/100,(i+l)/s,(r+l)/s]},'lightness','red to green','blue to yellow',[0,100],[-110,110],[-110,110]],['rgb',(e,t,n,a,i)=>{var r=Math.round;e[t]=r(n*_),e[t+1]=r(a*_),e[t+2]=r(i*_)},H,'red','green','blue',[0,255],[0,255],[0,255]]].reduce((e,t)=>{let[n]=t;const[,a,i,r,o,s,l,d,u]=t,[g,m,c]=n;return e[n]={name:n,labels:[r,o,s],minMax:[l,d,u],write:a,fromRGB:i},n=[g,c,m].join(''),e[n]={name:n,labels:[r,s,o],minMax:[l,u,d],write:(e,t,i,r,o,s)=>a(e,t,i,o,r,s),fromRGB:(e,t,n)=>{const[a,r,o]=i(e,t,n);return[a,o,r]}},n=[m,g,c].join(''),e[n]={name:n,labels:[o,r,s],minMax:[d,l,u],write:(e,t,i,r,o,s)=>a(e,t,r,i,o,s),fromRGB:(e,t,n)=>{const[a,r,o]=i(e,t,n);return[r,a,o]}},n=[m,c,g].join(''),e[n]={name:n,labels:[o,s,r],minMax:[d,u,l],write:(e,t,i,r,o,s)=>a(e,t,o,i,r,s),fromRGB:(e,t,n)=>{const[a,r,o]=i(e,t,n);return[r,o,a]}},n=[c,g,m].join(''),e[n]={name:n,labels:[s,r,o],minMax:[u,l,d],write:(e,t,i,r,o,s)=>a(e,t,r,o,i,s),fromRGB:(e,t,n)=>{const[a,r,o]=i(e,t,n);return[o,a,r]}},n=[c,m,g].join(''),e[n]={name:n,labels:[s,o,r],minMax:[u,d,l],write:(e,t,i,r,o,s)=>a(e,t,o,r,i,s),fromRGB:(e,t,n)=>{const[a,r,o]=i(e,t,n);return[o,r,a]}},e},{}),B={blue:'blue',blueToYellow:'blue to yellow',chroma:'chroma',green:'green',hue:'hue',lightness:'lightness',luminance:'luminance',luminosity:'luminosity',red:'red',redToGreen:'red to green',saturation:'saturation',value:'value',instruction:'two arrow-key based inputs and a text input',leftAndRight:'left and right',prefix:'select color',upAndDown:'up and down',colors:[['#000000','black'],['#FF0000','red']]},Y=Object.assign({},B,{prefix:'select colour',colors:B.colors.map(([e,t])=>[e,t.replace(/\bgray\b/,'grey')])});const G=new Set(['','auto','currentColor','inherit','transparent','unset']),X=/^\s*#?([\da-f])([\da-f])([\da-f])\s*$/i,Z=/^\s*#?([\da-f]{2})([\da-f]{2})([\da-f]{2})(?:[\da-f]{2})?\s*$/i,J=/rgba?\((\d+),\s*(\d+),\s*(\d+)/,ee=(e)=>(e<<4)+e,te=(e)=>{const t=document.createElement('div');Object.assign(t.style,{color:e,position:'absolute'}),document.body.appendChild(t);const n=getComputedStyle(t).color;t.remove();const a=J.exec(n);if(a)return a.slice(1).map(ne)},ne=(t)=>e(t),ae=(t)=>e(t,16),ie=(e)=>e.toString(16).padStart(2,0).toUpperCase(),re=(e)=>{if('string'==typeof e){let t;return(t=e.match(Z))?t.slice(1).map(ae):(t=e.match(X))?t.slice(1).map(ae).map(ee):(e=e.trim(),G.has(e)?void 0:te(e))}},oe=(e)=>`#${e.map(ie).join('')}`;window.rgbToHexString=(e)=>oe(Array.from(e));const se=['blue','blueToYellow','chroma','green','hue','instruction','leftAndRight','lightness','luminance','luminosity','prefix','red','redToGreen','saturation','upAndDown','value'],le=new Map([['ar',{blue:'\u0623\u0632\u0631\u0642',blueToYellow:'\u0627\u0644\u0623\u0632\u0631\u0642 \u0625\u0644\u0649 \u0627\u0644\u0623\u0635\u0641\u0631',chroma:'\u0635\u0641\u0627\u0621',green:'\u0623\u062E\u0636\u0631',hue:'\u0635\u0628\u063A\u0629',lightness:'\u0625\u0636\u0627\u0621\u0629',luminance:'\u0625\u0636\u0627\u0621\u0629',luminosity:'\u0625\u0636\u0627\u0621\u0629',red:'\u0623\u062D\u0645\u0631',redToGreen:'\u0627\u0644\u0623\u062D\u0645\u0631 \u0625\u0644\u0649 \u0627\u0644\u0623\u062E\u0636\u0631',saturation:'\u0625\u0634\u0628\u0627\u0639',value:'\u0642\u064A\u0645\u0629',instruction:'\u0648\u0627\u062B\u0646\u064A\u0646 \u0645\u0646 \u0627\u0644\u0645\u062F\u062E\u0644\u0627\u062A \u0639\u0644\u0649 \u0623\u0633\u0627\u0633 \u0627\u0644\u0633\u0647\u0645 \u0648\u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0646\u0635',leftAndRight:'\u064A\u0633\u0627\u0631 \u0648 \u064A\u0645\u064A\u0646',prefix:'\u0625\u062E\u062A\u0631 \u0644\u0648\u0646',upAndDown:'\u0635\u0639\u0648\u062F\u0627 \u0648\u0647\u0628\u0648\u0637\u0627',colors:[]}],['de',{blue:'Blau',blueToYellow:'Blau bis Gelb',chroma:'Buntheit',green:'Gr\xFCn',hue:'Farbton',lightness:'Helligkeit',luminance:'Leuchtdichte',luminosity:'Helligkeit',red:'Rot',redToGreen:'Rot bis Gr\xFCn',saturation:'Farbs\xE4ttigung',value:'Hellwert',instruction:'Zwei Pfeiltasten-basierte Eing\xE4nge und eine Texteingabe',leftAndRight:'links und rechts',prefix:'W\xE4hle Farbe',upAndDown:'oben und unten',colors:[]}],['en-GB',Y],['en-US',B],['es',{blue:'azul',blueToYellow:'azul a amarillo',chroma:'croma',green:'verde',hue:'matiz',lightness:'brillo',luminance:'luminancia',luminosity:'luminosidad',red:'red',redToGreen:'roja a verde',saturation:'saturaci\xF3n',value:'valor',instruction:'dos entradas de teclas de flecha y una entrada de texto',leftAndRight:'izquierda y derecha',prefix:'seleccionar el color',upAndDown:'arriba y abajo',colors:[]}],['fr',{blue:'bleu',blueToYellow:'bleu \xE0 jaune',chroma:'chroma',green:'vert',hue:'teinte',lightness:'clart\xE9',luminance:'lumi\xE8re',luminosity:'luminosit\xE9',red:'rouge',redToGreen:'rouge \xE0 vert',saturation:'saturation',value:'valeur',instruction:'deux entr\xE9es de touches fl\xE9ch\xE9es et une entr\xE9e de texte',leftAndRight:'gauche et droite',prefix:'choisissez la couleur',upAndDown:'haut et bas',colors:[]}],['ja',{blue:'\u9752',blueToYellow:'\u9752\u304B\u3089\u9EC4\u8272\u3078',chroma:'\u5F69\u5EA6',green:'\u7DD1',hue:'\u8272\u76F8',lightness:'\u8F1D\u5EA6',luminance:'\u660E\u5EA6',luminosity:'\u8F1D\u5EA6',red:'\u8D64',redToGreen:'\u8D64\u304B\u3089\u7DD1',saturation:'\u98FD\u548C',value:'\u5024',instruction:'2\u3064\u306E\u77E2\u5370\u30AD\u30FC\u5165\u529B\u3068\u30C6\u30AD\u30B9\u30C8\u5165\u529B',leftAndRight:'\u5DE6\u53F3',prefix:'\u8272\u3092\u9078\u629E',upAndDown:'\u4E0A\u4E0B',colors:[]}],['pt',{blue:'azul',blueToYellow:'azul para amarelo',chroma:'croma',green:'verde',hue:'matiz',lightness:'brilho',luminance:'lumin\xE2ncia',luminosity:'brilho',red:'vermelho',redToGreen:'vermelho para verde',saturation:'satura\xE7\xE3o',value:'valor',instruction:'duas entradas de teclas de seta e uma entrada de texto',leftAndRight:'esquerda e direita',prefix:'selecione a cor',upAndDown:'para cima e para baixo',colors:[]}],['ru',{blue:'\u0441\u0438\u043D\u0438\u0439',blueToYellow:'\u043E\u0442 \u0441\u0438\u043D\u0435\u0433\u043E \u0434\u043E \u0436\u0435\u043B\u0442\u043E\u0433\u043E',chroma:'\u0446\u0432\u0435\u0442\u043D\u043E\u0441\u0442\u044C',green:'\u0437\u0435\u043B\u0451\u043D\u044B\u0439',hue:'\u0442\u043E\u043D',lightness:'\u0441\u0432\u0435\u0442\u043B\u043E\u0442\u0430',luminance:'\u0441\u0432\u0435\u0442\u043B\u043E\u0442\u0430',luminosity:'\u0441\u0432\u0435\u0442\u043B\u043E\u0442\u0430',red:'\u043A\u0440\u0430\u0441\u043D\u044B\u0439',redToGreen:'\u043E\u0442 \u043A\u0440\u0430\u0441\u043D\u043E\u0433\u043E \u0434\u043E \u0437\u0435\u043B\u0435\u043D\u043E\u0433\u043E',saturation:'\u043D\u0430\u0441\u044B\u0449\u0435\u043D\u043D\u044B\u0439',value:'\u044F\u0440\u043A\u043E\u0441\u0442\u044C',instruction:'\u0434\u0432\u0430 \u0432\u0445\u043E\u0434\u0430 \u0441\u043E \u0441\u0442\u0440\u0435\u043B\u043E\u0447\u043D\u043E\u0439 \u043A\u043B\u0430\u0432\u0438\u0448\u0435\u0439 \u0438 \u0432\u0432\u043E\u0434 \u0442\u0435\u043A\u0441\u0442\u0430',leftAndRight:'\u0432\u043B\u0435\u0432\u043E \u0438 \u0432\u043F\u0440\u0430\u0432\u043E',prefix:'\u0432\u044B\u0431\u0440\u0430\u0442\u044C \u0446\u0432\u0435\u0442',upAndDown:'\u0432\u0432\u0435\u0440\u0445 \u0438 \u0432\u043D\u0438\u0437',colors:[]}],['zh',{blue:'\u84DD\u8272',blueToYellow:'\u84DD\u8272\u81F3\u9EC4\u8272',chroma:'\u8272\u5EA6',green:'\u7EFF\u8272',hue:'\u8272\u76F8',lightness:'\u4EAE\u5EA6',luminance:'\u4EAE\u5EA6',luminosity:'\u4EAE\u5EA6',red:'\u7EA2',redToGreen:'\u7EA2\u8272\u5230\u7EFF\u8272',saturation:'\u9971\u548C\u5EA6',value:'\u660E\u5EA6',instruction:'\u4E24\u4E2A\u57FA\u4E8E\u7BAD\u5934\u952E\u7684\u8F93\u5165\u548C\u4E00\u4E2A\u6587\u672C\u8F93\u5165',leftAndRight:'\u5DE6\u548C\u53F3',prefix:'\u9009\u62E9\u989C\u8272',upAndDown:'\u4E0A\u4E0B',colors:[]}]]),de=()=>le.get(navigator.languages.find((e)=>le.has(e))||'en-US'),ue='CI_CONTAINER',ge='CI_DESC',me='CI_GUTTER',ce='CI_OUTER',he='CI_TEXT_DATA',fe='CI_TEXT_INPUT',pe='CI_TEXT_INPUT_LABEL',be='CI_TEXT_INPUT_ROW',ye='CI_XY_CANVAS',xe='CI_XY_ALERT',ve='CI_XY',Ae='CI_XY_NUB',_e='CI_Z_CANVAS',Ce='CI_Z',we='CI_Z_NUB',ze='20px',$e='13px',De='35px',Ie=120;var Le=Object.assign(document.createElement('template'),{innerHTML:`
    <style>
      :host {
        contain          : strict;
        display          : block;
        height           : 245px;
        width            : 275px;
      }

      #${ce} {
        display          : flex;
        flex-direction   : column;
        height           : 100%;
        outline-offset   : -5px; ${''}
        width            : 100%;
      }

      #${ce}.dragging {
        cursor           : -webkit-grabbing;
        cursor           : grabbing;
      }

      #${ue} {
        box-sizing       : border-box;
        display          : flex;
        flex             : 1 0 0;
        left             : 0;
        overflow         : hidden;
        padding          : var(
          --color-input-slider-radius, ${$e}
        );
        position         : relative;
        top              : 0;
        user-select      : none;
      }

      #${me} {
        flex             : 0 0 ${ze};
      }

      #${ye},
      #${_e} {
        cursor           : pointer;
        height           : 100%;
        transform        : translateZ(0);
        width            : 100%;
      }

      .dragging #${ye},
      .dragging #${_e} {
        cursor           : -webkit-grabbing;
        cursor           : grabbing;
      }

      #${ye} {
        border           : var(--color-input-xy-border);
        border-radius    : var(--color-input-xy-border-radius);
      }

      #${ye}:focus {
        outline          : var(
          --color-input-xy-focus-outline,
          -webkit-focus-ring-color auto 5px
        );
        outline-offset   : var(--color-input-xy-focus-outline-offset, 0px);
      }

      #${_e} {
        border           : var(--color-input-z-border);
        border-radius    : var(--color-input-z-border-radius);
      }

      #${_e}:focus {
        outline          : var(
          --color-input-z-focus-outline,
          -webkit-focus-ring-color auto 5px
        );
        outline-offset   : var(--color-input-z-focus-outline-offset, 0px);
      }

      #${ve},
      #${Ce} {
        align-items      : center;
        box-sizing       : border-box;
        display          : flex;
        flex-shrink      : 0;
        justify-content  : center;
        overflow         : visible;
        position         : relative;
      }

      #${ve} {
        flex-basis       : 0;
        flex-grow        : 1;
      }

      #${Ce} {
        flex-basis       : ${De};
      }

      #${Ae},
      #${we} {
        border-style     : solid;
        border-width     : 2px;
        border-radius    : calc(2 * var(
          --color-input-slider-radius, ${$e}
        ));
        bottom           : 0;
        box-sizing       : border-box;
        cursor           : -webkit-grab;
        cursor           : grab;
        height           : calc(2 * var(
          --color-input-slider-radius, ${$e}
        ));
        margin-bottom    : calc(0px - var(
          --color-input-slider-radius, ${$e}
        ));
        position         : absolute;
        transform        : scale(var(--color-input-slider-scale, 0.667));
        transform-origin : center;
        transition       : transform 80ms ease, border-color 100ms ease;
        width            : calc(2 * var(
          --color-input-slider-radius, ${$e}
        ));
      }

      .dragging-xy #${Ae},
      .dragging-z #${we} {
        cursor           : -webkit-grabbing;
        cursor           : grabbing;
        transform        : none;
      }

      #${Ae}.initial-movement,
      #${we}.initial-movement {
        transition:
          background-color 80ms  ease,
          border-color     100ms ease,
          bottom           ${Ie}ms ease,
          left             ${Ie}ms ease,
          transform        80ms  ease;
      }

      #${Ae} {
        left             : 0;
        margin-left      : calc(0px - var(
          --color-input-slider-radius, ${$e}
        ));
      }

      #${we}.vertical {
        margin-left      : calc(0px - var(
          --color-input-slider-radius, ${$e}
        ));
      }

      #${pe} {
        display: none;
      }

      #${be} {
        display: flex;
        margin           : var(
          --color-input-slider-radius, ${$e}
        );
        margin-top       : calc(
          var(--color-input-gutter-width, ${ze}) -
          var(--color-input-slider-radius, ${$e})
        );
      }

      #${fe} {

        /* Proxied vars where no default value works fine */
        border-color     : var(--color-input-field-border-color);
        border-radius    : var(--color-input-field-border-radius);
        height           : var(--color-input-field-height);
        letter-spacing   : var(--color-input-field-letter-spacing);
        text-align       : var(--color-input-field-text-align);
        text-shadow      : var(--color-input-field-text-shadow);

        ${''}

        background       : var(--color-input-field-background, white);
        border-style     : var(--color-input-field-border-style, inset);
        border-width     : var(--color-input-field-border-width, 2px);
        color            : var(--color-input-field-color, initial);
        font             : var(--color-input-field-font, 11px system-ui);
        padding          : var(--color-input-field-padding, 1px);

        -webkit-appearance: var(
          --color-input-field-webkit-appearance, textfield
        );
      }

      #${fe}:focus {
        outline          : var(
          --color-input-field-focus-outline,
          -webkit-focus-ring-color auto 5px
        );
        outline-offset   : var(--color-input-field-focus-outline-offset, 0px);
      }

      .dragging #${fe} {
        cursor           : -webkit-grabbing;
        cursor           : grabbing;
      }

      .speech-only,
      #${be}.speech-only {
        clip-path: inset(100%);
        clip: rect(1px, 1px, 1px, 1px);
        display: inline-block;
        height: 1px;
        margin: 0;
        overflow: hidden;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }
    </style>

    <datalist id="${he}">
    </datalist>

    <div
      aria-describedby="${ge}"
      id="${ce}"
      tabindex="0">

      <div
        class="speech-only"
        id="${ge}">
      </div>

      <div id="${ue}">

        <div id="${ve}">
          <canvas
            height="0"
            id="${ye}"
            tabindex="0"
            width="0">
          </canvas>
          <div id="${Ae}"></div>
          <div
            class="speech-only"
            id="${xe}">
          </div>
        </div>

        <div id="${me}"></div>

        <div id="${Ce}">
          <canvas
            aria-orientation="vertical"
            role="slider"
            height="0"
            id="${_e}"
            tabindex="0"
            width="0">
          </canvas>
          <div id="${we}"></div>
        </div>
      </div>

      <div id="${be}">
        <span
          aria-hidden="true"
          id="${pe}"
          role="presentation">
        </span>
        <input
          id="${fe}"
          list="${he}"
          type="text">
      </div>
    </div>
  `});const Ee=new Set(['ArrowDown','ArrowLeft','ArrowRight','ArrowUp']),Re='direction',Ve='--color-input-gutter-width',Te='--color-input-high-res',Be='--color-input-field-position',Ye='--color-input-label-visibility',Ge='--color-input-x-axis-direction',Se='--color-input-y-axis-direction',Xe='--color-input-z-axis-direction',Fe='--color-input-z-axis-position',Ze='--color-input-z-axis-width',Ne='ascending',Pe='bottom',ke='end',Ue=[[Re,'ltr'],[Ve,ze],[Te,'false'],[Be,Pe],[Ye,'none'],[Ge,Ne],[Se,Ne],[Xe,Ne],[Fe,ke],[Ze,De]],Ke=4/7,Me=new Set(['top','bottom','none']),We=new Set(['bottom','end','left','right','start','top']),je=(e)=>([t,n])=>[t,e.getPropertyValue(t).trim()||n];class ColorInputInternal{constructor(e,t){const n=document.importNode(Le.content,!0);this.$host=t,this.$container=n.getElementById(ue),this.$datalist=n.getElementById(he),this.$desc=n.getElementById(ge),this.$gutter=n.getElementById(me),this.$input=n.getElementById(fe),this.$inputRow=n.getElementById(be),this.$label=n.getElementById(pe),this.$outer=n.getElementById(ce),this.$xy=n.getElementById(ve),this.$xyAlert=n.getElementById(xe),this.$xyCanvas=n.getElementById(ye),this.$xyNub=n.getElementById(Ae),this.$z=n.getElementById(Ce),this.$zCanvas=n.getElementById(_e),this.$zNub=n.getElementById(we),this.barePercent=void 0,this.colorAccess=new Map,this.degrees=void 0,this.lang=void 0,this.mode=R.hlc,this.noClamp=!1,this.percent=void 0,this._deregs=new Set,this._raf=void 0,this._grabStyle=void 0,this._rafFn=()=>{this.render(),this._raf=requestAnimationFrame(this._rafFn)},this.defaultValue=void 0,this.dirty=!1,this.hasValue=!1,this.css=new Map,this.highRes=!1,this.highResAuto=1<window.devicePixelRatio,this.horizontal=!0,this.inputPosition=Pe,this.labelVisible=!1,this.xDescending=!1,this.yDescending=!1,this.zDescending=!1,this.zPosition='end',this.xyContext=this.$xyCanvas.getContext('2d',{alpha:!1}),this.xyImage=this.xyContext.createImageData(1,1),this.zContext=this.$zCanvas.getContext('2d',{alpha:!1}),this.zImage=this.zContext.createImageData(1,1),this.zImage.data.fill(255),this.xyImage.data.fill(255),this.xAxisValue=0,this.yAxisValue=0,this.zAxisValue=0,this._dragging=!1,this._renderXY=!0,this._renderZ=!0,this._terminateDrag=void 0,this._transientX=void 0,this._transientY=void 0,this._transientZ=void 0,this._xyMouseDown=void 0,this._zMouseDown=void 0,e.append(n)}addGrab(){this._grabStyle||(this._grabStyle=Object.assign(document.createElement('style'),{innerText:`* { cursor: not-allowed !important; }`})),document.head.appendChild(this._grabStyle)}connect(){this._rafFn(),this.listenForFocus(),this.listenForInput(),this.listenForKeyboard(),this.listenForMouseDownOnCanvas(),this.listenForMouseDownOnNubs(),this.listenForLanguage(),this.updateLabels()}disconnect(){cancelAnimationFrame(this._raf),this._deregs.forEach((e)=>e()),this._deregs.clear(),this._grabStyle=void 0,this.removeGrab()}effectiveSelectionAsRGB(){const{mode:e,effectiveX:t,effectiveY:n,effectiveZ:a}=this,i=new Uint8ClampedArray(3);return e.write(i,0,t,n,a,!1),i}getGraceZone(){return Number.parseFloat(window.getComputedStyle(this.$container).padding)}getLabelXY(e){return`${e}: `+`${this.xWord} (${this.lang.leftAndRight}), `+`${this.yWord} (${this.lang.upAndDown})`}getLabelZ(e){return`${e}: ${this.zWord}`}inGraceZone(e,t,n){const{bottom:a,left:i,right:r,top:o}=n.getBoundingClientRect(),s=this.getGraceZone();return e+s>=i&&e-s<=r&&t+s>=o&&t-s<=a}listenForFocus(){const e=()=>{this.$xyAlert.setAttribute('role','alert'),this.$xyAlert.setAttribute('aria-live','polite')},t=()=>{this.$xyAlert.removeAttribute('role'),this.$xyAlert.removeAttribute('aria-live')};this.$xyCanvas.addEventListener('focus',e),this.$xyCanvas.addEventListener('blur',t),this._deregs.add(()=>this.$xyCanvas.removeEventListener('focus',e)).add(()=>this.$xyCanvas.removeEventListener('blur',t))}listenForInput(){const e=()=>{let{value:e}=this.$input;const t=this.lang.colors.find(([,t])=>t===e);t&&([e]=t),this.$host.value=e};this.$input.addEventListener('change',e),this._deregs.add(()=>this.$input.removeEventListener('change',e))}listenForKeyboard(){const e=(e)=>{e.defaultPrevented||this._dragging&&'Escape'===e.key&&(this._terminateDrag&&this._terminateDrag(),e.preventDefault())},a=(e)=>{if(Ee.has(e.key)&&!this._dragging){const[a,i]=this.xDescending?['ArrowLeft','ArrowRight']:['ArrowRight','ArrowLeft'],[r,o]=this.yDescending?['ArrowDown','ArrowUp']:['ArrowUp','ArrowDown'],s=e.shiftKey?0.1:0.01;switch(e.key){case a:this.xAxisValue=t(1,this.xAxisValue+s),this._renderZ=!0,this.signalChange();break;case i:this.xAxisValue=n(0,this.xAxisValue-s),this._renderZ=!0,this.signalChange();break;case r:this.yAxisValue=t(1,this.yAxisValue+s),this._renderZ=!0,this.signalChange();break;case o:this.yAxisValue=n(0,this.yAxisValue-s),this._renderZ=!0,this.signalChange();}e.preventDefault()}},i=(e)=>{if(Ee.has(e.key)&&!this._dragging){const a=this.horizontal?['ArrowUp','ArrowDown']:['ArrowRight','ArrowLeft'];this.zDescending&&a.reverse();const[i,r]=a,o=e.shiftKey?0.1:0.01;switch(e.key){case i:this.zAxisValue=t(1,this.zAxisValue+o),this._renderXY=!0,this.signalChange();break;case r:this.zAxisValue=n(0,this.zAxisValue-o),this._renderXY=!0,this.signalChange();}e.preventDefault()}};this.$xyCanvas.addEventListener('keydown',a),this.$zCanvas.addEventListener('keydown',i),this.$outer.addEventListener('keydown',e),this._deregs.add(()=>this.$xyCanvas.removeEventListener('keydown',a)).add(()=>this.$zCanvas.removeEventListener('keydown',i)).add(()=>this.$outer.removeEventListener('keydown',e))}listenForLanguage(){const e=()=>{this.lang=de();const e=new Intl.NumberFormat(navigator.languages,{maximumFractionDigits:1,style:'decimal'}),t=new Intl.NumberFormat(navigator.languages,{maximumFractionDigits:1,style:'percent'}),n=new Intl.NumberFormat(navigator.languages,{maximumFractionDigits:0,style:'decimal'});for(this.barePercent=(t)=>e.format(100*t),this.percent=(e)=>t.format(e),this.degrees=(e)=>`${n.format(360*e)}°`;this.$datalist.firstChild;)this.$datalist.removeChild(this.$datalist.firstChild);for(const[e,t]of this.lang.colors)this.$datalist.appendChild(Object.assign(document.createElement('option'),{label:t,value:e}));this.updateLabels()};window.addEventListener('languagechange',e),this._deregs.add(()=>window.removeEventListener('languagechange',e)),e()}listenForMouseDownOnCanvas(){for(const[e,a]of[['xy','z'],['z','xy']]){let i;const r=[...e].map((e)=>[`${e}AxisValue`,`_transient${e.toUpperCase()}`]),o=`dragging-${e}`,s=`_render${a.toUpperCase()}`,l=`set${e.toUpperCase()}TentativelyFromEvent`,d=r.map(([,e])=>e),{[`$${e}Canvas`]:u,[`$${e}Nub`]:g,$outer:m}=this,c=this[`_${e}MouseDown`]=(e)=>{clearTimeout(i),this[l](e),this._dragging=!0,this.addGrab(),m.classList.add('dragging',o),g.classList.add('initial-movement'),i=setTimeout(()=>g.classList.remove('initial-movement'),Ie);const a=({clientX:e,clientY:a})=>{const{bottom:i,left:r,right:o,top:s}=u.getBoundingClientRect(),d=t(n(r,e),o)-r,g=t(n(s,a),i)-s;this[l]({offsetX:d,offsetY:g})},c=({clientX:e,clientY:t})=>{if(this.inGraceZone(e,t,u)){for(const[e,t]of r)this[e]=this[t];this[s]=!0,this.signalChange()}this._terminateDrag()},h=this._terminateDrag=()=>{document.removeEventListener('blur',h),document.removeEventListener('mousemove',a),document.removeEventListener('mouseup',c),this.removeGrab(),u.removeEventListener('blur',h),this.$outer.classList.remove('dragging',o),this._deregs.delete(h),this[s]=!0,this._dragging=!1,this._terminateDrag=void 0;for(const e of d)this[e]=void 0};document.addEventListener('blur',h),document.addEventListener('mousemove',a),document.addEventListener('mouseup',c),u.addEventListener('blur',h),this._deregs.add(h)};u.addEventListener('mousedown',c),this._deregs.add(()=>u.removeEventListener('mousedown',c))}this._deregs.add(()=>this._xyMouseDown=this._zMouseDown=void 0)}listenForMouseDownOnNubs(){for(const e of['xy','z']){const a=this[`$${e}Canvas`],i=this[`$${e}Nub`],r=`_${e}MouseDown`,o=(e)=>{const{clientX:i,clientY:o}=e,{bottom:s,left:l,right:d,top:u}=a.getBoundingClientRect(),g=t(n(l,i),d)-l,m=t(n(u,o),s)-u;a.focus(),e.preventDefault(),this[r]({offsetX:g,offsetY:m})};i.addEventListener('mousedown',o),this._deregs.add(()=>i.removeEventListener('mousedown',o))}}removeGrab(){this._grabStyle&&this._grabStyle.remove()}render(){this.updateFromCSS(),this.updateFromDimensions(),(this._renderZ||this._renderXY)&&this.setXYZNubColors(),this._renderZ&&(this._renderZ=!1,this.setXYNubPosition(),this.renderZ()),this._renderXY&&(this._renderXY=!1,this.setZNubPosition(),this.renderXY())}renderXY(){const{noClamp:e,xDescending:t,yDescending:n,effectiveZ:a}=this,{data:r,height:o,width:s}=this.xyImage,{write:l}=this.mode,d=o-1;let u=0;for(let i=0;i<o;i++){const o=n?i/d||0:1-(i/d||0);for(let n=0;n<s;n++){const i=n/(s-1)||0;l(r,u,t?1-i:i,o,a,e),u+=4}}this.xyContext.putImageData(this.xyImage,0,0)}renderZ(){const{noClamp:e,effectiveX:t,effectiveY:n,mode:{write:a}}=this,{data:r}=this.zImage,{length:o}=r,s=this.horizontal!==this.zDescending;for(let l=0;l<o;l+=4){const i=l/(o-4)||0;a(r,l,t,n,s?1-i:i,e)}this.zContext.putImageData(this.zImage,0,0)}selectionAsRGB(){const{mode:e,xAxisValue:t,yAxisValue:n,zAxisValue:a}=this,i=new Uint8ClampedArray(3);return e.write(i,0,t,n,a,!1),i}setDefaultValue(e){this.defaultValue=re(e),this.dirty||(this.setSelectionFromRGB(this.defaultValue||[0,0,0]),this.hasValue=!!this.defaultValue,this.$input.value=this.$host.value)}setDirectionsFromCSS(){const e='descending'===this.css.get(Ge),t='descending'===this.css.get(Se),n='descending'===this.css.get(Xe);(this.xDescending!==e||this.yDescending!==t)&&(this.xDescending=e,this.yDescending=t),this.zDescending!==n&&(this.zDescending=n),this._renderXY=!0,this._renderZ=!0}setGutterAndZWidthFromCSS(e){const t=this.css.get(Ve),n=this.css.get(Ze);e&&(this.$gutter.style.flexBasis=t),this.$z.style.flexBasis=`calc(${n} - (${t} / 2))`}setInputPositionFromCSS(){let e=this.css.get(Be);if(Me.has(e)||(e=Pe),this.inputPosition!==e)switch('none'===this.inputPosition&&this.$inputRow.classList.remove('speech-only'),this.inputPosition=e,e){case'bottom':return void(this.$outer.style.flexDirection='column');case'none':return void this.$inputRow.classList.add('speech-only');case'top':this.$outer.style.flexDirection='column-reverse';}}setLabelVisibilityFromCSS(){const e='visible'===this.css.get(Ye);this.labelVisible!==e&&(this.labelVisible=e,this.$label.style.display=e?'block':'none')}setOrientationFromCSS(e,t){if(e){const e=this.css.get(Fe),n=We.has(e)?e:ke,a='top'!==n&&'bottom'!==n;if(a!==this.horizontal&&(this.$zNub.classList[a?'remove':'add']('vertical'),this.$zCanvas.setAttribute('aria-orientation',a?'vertical':'horizontal'),this.horizontal=a,this._renderZ=!0),this.zPosition===n&&!t)return;this.zPosition=n}this.$container.style.flexDirection='start'===this.zPosition?'row-reverse':'end'===this.zPosition?'row':'top'===this.zPosition?'column-reverse':'bottom'===this.zPosition?'column':'left'===this.zPosition?'ltr'===this.css.get(Re)?'row-reverse':'row':'rtl'===this.css.get(Re)?'row-reverse':'row'}setResolutionFromCSS(){const e=this.css.get(Te),t='true'===e||!('auto'!==e)&&this.highResAuto;this.highRes!==t&&(this.highRes=t,this._renderXY=!0,this._renderZ=!0)}setSelectionFromRGB(e){[this.xAxisValue,this.yAxisValue,this.zAxisValue]=this.mode.fromRGB(...e),this._dragging||(this._renderXY=!0,this._renderZ=!0)}setXYNubPosition(){const e=100*(this.xDescending?1-this.effectiveX:this.effectiveX),t=100*(this.yDescending?1-this.effectiveY:this.effectiveY);this.$xyNub.style.left=`${e}%`,this.$xyNub.style.bottom=`${t}%`}setXYTentativelyFromEvent({offsetX:e,offsetY:t}){const n=e/this.xyWidth||0,a=t/this.xyHeight||0,i=this.xDescending?1-n:n,r=this.yDescending?a:1-a;(this._transientX!==i||this._transientY!==r)&&(this._renderZ=!0,this._transientX=i,this._transientY=r)}setXYZNubColors(){const e=this.effectiveSelectionAsRGB();this.$zNub.style.backgroundColor=this.$xyNub.style.backgroundColor=oe([...e]);const t=R.hcl.fromRGB(...e),n=t[2];n<2/3?t[2]+=(1-n)*Ke:t[2]-=n*Ke,R.hcl.write(e,0,...t,!1),this.$zNub.style.borderColor=this.$xyNub.style.borderColor=oe([...e])}setZNubPosition(){const e=100*(this.zDescending?1-this.effectiveZ:this.effectiveZ);this.horizontal?(this.$zNub.style.left='inherit',this.$zNub.style.bottom=`${e}%`):(this.$zNub.style.left=`${e}%`,this.$zNub.style.bottom='inherit')}setZTentativelyFromEvent({offsetX:e,offsetY:t}){const[n,a]=this.horizontal?[t,this.zHeight]:[e,this.zWidth],i=n/a||0,r=this.zDescending===this.horizontal?i:1-i;this._transientZ!==r&&(this._renderXY=!0,this._transientZ=r)}signalChange(e=!1){if(this.noClamp){const{mode:e,xAxisValue:t,yAxisValue:n,zAxisValue:a}=this,i=[];e.write(i,0,t,n,a,!1),i.some((e)=>255<e||0>e)&&([this.xAxisValue,this.yAxisValue,this.zAxisValue]=this.mode.fromRGB(...Uint8ClampedArray.from(i)),this._renderXY=!0,this._renderZ=!0)}this.updateValueLabels(),this.hasValue=!e,this.dirty=!0,this.$input.value=this.$host.value,this.$host.dispatchEvent(new CustomEvent('change'))}updateFromCSS(){const e=window.getComputedStyle(this.$container),t=Ue.map(je(e)),n=new Map(t.filter(([e,t])=>this.css.get(e)!==t));if(n.size){this.css=new Map(t);const e=n.has(Re),a=n.has(Ve),i=n.has(Te),r=n.has(Be),o=n.has(Ye),s=n.has(Fe),l=n.has(Ge),d=n.has(Se),u=n.has(Xe),g=n.has(Ze);r&&this.setInputPositionFromCSS(),o&&this.setLabelVisibilityFromCSS(),(s||e)&&this.setOrientationFromCSS(s,e),(a||g)&&this.setGutterAndZWidthFromCSS(a),i&&this.setResolutionFromCSS(),(l||d||u)&&this.setDirectionsFromCSS()}}updateFromDimensions(){let{clientWidth:e,clientHeight:t}=this.$xy,{clientWidth:n,clientHeight:a}=this.$z;this.highRes&&(t*=2,e*=2,a*=2,n*=2),t=t||1,e=e||1,a=this.horizontal?a||1:1,n=this.horizontal?1:n||1,(this.xyImage.width!==e||this.xyImage.height!==t)&&(this._renderXY=!0,this.$xyCanvas.width=e,this.$xyCanvas.height=t,this.xyImage=this.xyContext.createImageData(e,t),this.xyImage.data.fill(255)),(this.zImage.width!==n||this.zImage.height!==a)&&(this._renderZ=!0,this.$zCanvas.width=n,this.$zCanvas.height=a,this.zImage=this.zContext.createImageData(n,a),this.zImage.data.fill(255))}updateLabels(){const e=this.$host.hasAttribute('aria-label'),t=e?this.$host.getAttribute('aria-label'):this.lang.prefix;e||this.$host.hasAttribute('tabindex')?this.$outer.removeAttribute('aria-label'):this.$outer.setAttribute('aria-label',t),this.$desc.innerText=this.lang.instruction,this.$label.innerText=t,this.$input.setAttribute('aria-label',t),this.$xyCanvas.setAttribute('aria-label',this.getLabelXY(t)),this.$zCanvas.setAttribute('aria-label',this.getLabelZ(t)),this.updateValueLabels()}updateTabIndex(){this.$host.hasAttribute('tabindex')?this.$outer.removeAttribute('tabindex'):this.$outer.setAttribute('tabindex','0')}updateValueLabels(){this.$zCanvas.setAttribute('aria-valuenow',this.barePercent(this.zAxisValue)),this.$zCanvas.setAttribute('aria-valuetext',this.zAxisValueLanguage),this.$xyAlert.innerText=`${this.xWord}: `+`${this.xAxisValueLanguage}; `+`${this.yWord}: `+`${this.yAxisValueLanguage}`}}for(const[e,t]of['x','y','z'].entries()){const n=`_transient${t.toUpperCase()}`,a=`${t}AxisValue`;Object.defineProperties(ColorInputInternal.prototype,{[`${t}AxisValueLanguage`]:{get(){return'hue'===this.mode.labels[e]?this.degrees(this[a]):this.percent(this[a])}},[`${t}Word`]:{get(){return this.lang[this.mode.labels[e]]}},[`effective${t.toUpperCase()}`]:{get(){return this[n]===void 0?this[a]:this[n]}}})}for(const e of['xy','z'])for(const t of['height','width']){const n=`$${e}Canvas`,a=e+t[0].toUpperCase()+t.slice(1);Object.defineProperty(ColorInputInternal.prototype,a,{get(){return this.highRes?this[n][t]/2:this[n][t]}})}var He=(e)=>{const[a,i,r]=e.name,[[o,s],[l,d],[u,g]]=e.minMax,m=[[a,o,s],[i,l,d],[r,u,g]],c=(a)=>Object.create(Object.prototype,m.reduce((i,[r,o,s],l)=>{return i[r]={get(){if(a.hasValue){const t=e.fromRGB(...a.selectionAsRGB())[l];return t*s-o}},set(i){i=+i,i=Number.isFinite(i)?i:0,i=t(s,n(o,i))+o;const r=e.fromRGB(...a.selectionAsRGB()),d=new Uint8ClampedArray(3);r[l]=i/(s-o),e.write(d,0,...r),a.$host.value=oe(Array.from(d))}},i},{}));return{get(){const t=Oe.get(this);return t.colorAccess.has(e)||t.colorAccess.set(e,c(t)),t.colorAccess.get(e)}}};const Oe=new WeakMap;class ColorInputElement extends HTMLElement{constructor(){super(),Oe.set(this,new ColorInputInternal(this.attachShadow({mode:'open'}),this))}get clamp(){return!Oe.get(this).clamp}set clamp(e){const t=!1===e,n=Oe.get(this);n.noClamp!==t&&(n.noClamp=t,n._renderXY=!0,n._renderZ=!0);const a=!t+'';a!==(this.getAttribute('clamp')||'').toLowerCase().trim()&&this.setAttribute('clamp',a)}get mode(){return Oe.get(this).mode.name}set mode(e){const t=R[(e+'').toLowerCase()]||R.hlc,n=Oe.get(this);if(n.mode!==t){const e=n.selectionAsRGB();n.mode=t,n.updateLabels(),n.setSelectionFromRGB(e),this.mode!==(this.getAttribute('mode')||'').toLowerCase().trim()&&this.setAttribute('mode',t.name)}}get value(){const e=Oe.get(this);return e.hasValue?oe([...e.selectionAsRGB()]):''}set value(e){const t=re(e+''),n=Oe.get(this);n.dirty=!0,t?(n.setSelectionFromRGB(t),n.signalChange()):n.signalChange(!0)}get valueAsNumber(){const e=Oe.get(this);return e.hasValue?e.selectionAsRGB().reduce((e,t)=>(e<<8)+t,0):NaN}set valueAsNumber(e){if(e=+e,!Number.isInteger(e))throw new TypeError('Failed to set the \'valueAsNumber\' property on ColorInputElement: The value provided is not an integer.');if(0>e||16777215<e)throw new RangeError('Failed to set the \'valueAsNumber\' property on ColorInputElement: The value provided is out of range.');this.value=`#${e.toString(16).padStart(6,0)}`}attributeChangedCallback(e,t,n){if(n=(n||'').trim().toLowerCase(),t=(t||'').trim().toLowerCase(),n!==t)switch(n='true'===n||'false'!==n&&n,e){case'aria-label':return void Oe.get(this).updateLabels();case'clamp':return void(this.clamp=n);case'mode':return void(this.mode=n);case'name':return void(this.name=n);case'tabindex':return void Oe.get(this).updateTabIndex();case'value':Oe.get(this).setDefaultValue(n);}}connectedCallback(){Oe.get(this).connect()}disconnectedCallback(){Oe.get(this).disconnect()}}Object.defineProperties(ColorInputElement,{observedAttributes:{value:Object.freeze(['aria-label','clamp','mode','name','tabindex','value'])},registerLanguage:{value:(e,t)=>{[e]=Intl.getCanonicalLocales(e);const n=le.get(e.slice(0,2))||B,a=Object.assign({},n,t);for(const n of se)if('string'!=typeof a[n])throw new TypeError(`Language definition property ${n} must have a string value`);if(!a.colors||!a.colors[Symbol.iterator])throw new TypeError(`Language definition property colors must be an array`);const i=Array.from(a.colors);if(i.some((e)=>!Array.isArray(e)))throw new TypeError(`Language colors must be string pairs`);if(i.some(([e])=>!re(e)))throw new TypeError(`Language color values must be valid CSS`);if(i.some(([,e])=>'string'!=typeof e))throw new TypeError(`Language color names must be non-empty strings`);if(new Set(i.map(([,e])=>e)).size!==i.length)throw new TypeError(`Language color names must not be duplicated`);a.colors=i.map(([e,t])=>[re(e),t]),le.set(e,a)}}}),Object.defineProperties(ColorInputElement.prototype,{hcl:He(R.hcl),hsl:He(R.hsl),hsv:He(R.hsv),lab:He(R.lab),rgb:He(R.rgb)}),Object.freeze(ColorInputElement),Object.freeze(ColorInputElement.prototype);((e='color-input')=>{customElements.define(e,ColorInputElement)})()})();
